<app-doc-page [importString]="importString">
    <div class="w-100" example>
        <sebng-table
            [rows]="rows$ | async"
            [headerList]="headerList$ | async"
            [selectable]="selectable"
            [selectedRowIndexes]="selectable ? (selectedRows$ | async)[pageIndex$ | async] : null"
            [isAllSelected]="isAllSelected$ | async"
            [sortInfo]="sortInfo$ | async"
            [fixedHeight]="hasFixedHeight ? height + 'px' : null"
            (sortClicked)="changeSort($event)"
            (selectAllClicked)="selectAll()"
            (rowClicked)="selectRow($event.index)"
        ></sebng-table>
        <sebng-pagination
            *ngIf="usePagination"
            [value]="(pageIndex$ | async) + 1"
            [size]="data.length"
            [offset]="itemsPerPage"
            [pagingLength]="5"
            (change)="changePage($event)"
        ></sebng-pagination>
    </div>
    <div controls>
        <sebng-checkbox [(ngModel)]="selectable" label="Selectable" description="Enable selectable rows with checkboxes"></sebng-checkbox>

        <sebng-checkbox
            [(ngModel)]="hasFixedHeight"
            label="Fixed Height"
            description="Preserve table height and scroll the content"
        ></sebng-checkbox>

        <ng-container *ngIf="hasFixedHeight">
            <label>Table height </label>
            <sebng-stepper className="mb-0" [(ngModel)]="height" [min]="20" [max]="500" [step]="5"></sebng-stepper>
            <p><small>Set the height of the table (in px)</small></p>
        </ng-container>

        <sebng-dropdown
            className="mb-3"
            [ngModel]="getDropdownItemByColumnName((sortInfo$ | async)?.column)"
            (ngModelChange)="changeSort($event.value)"
            [list]="sortDropdownList"
            label="Sort table by"
        ></sebng-dropdown>

        <sebng-dropdown
            [ngModel]="selectedColumnsDropdownList"
            (ngModelChange)="changeColumns(getColumnsFromDropdownList($event)); selectedColumnsDropdownList = $event"
            [list]="columnsDropdownList"
            [multi]="true"
            label="Show columns"
        ></sebng-dropdown>
        <p><small>(Note: Deselecting all columns will default to all columns being showed.)</small></p>

        <sebng-checkbox
            [ngModel]="usePagination"
            (ngModelChange)="handleChnageUsePagination($event)"
            label="Use pagination"
            description="Show as paginated table (example fixed to {{ itemsPerPage }} items per page)."
        ></sebng-checkbox>
    </div>
    <ng-container code>{{ snippet(selectable, isAllSelected$ | async, sortInfo$ | async, height) }}</ng-container>
    <!--
        // TODO: Add info about the table service
        <ng-container notes></ng-container>
    -->
</app-doc-page>
