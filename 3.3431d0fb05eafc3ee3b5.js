(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{B3dm:function(e,t,r){"use strict";r.d(t,"a",function(){return k});var o=r("mrSG"),n=r("s7LF"),i=r("bF3y"),c=r("MpqC"),a=r("Ci8B"),m=r("8Y7J"),l=r("SVse"),u=r("ChzD");function d(e,t){if(1&e&&(m.Tb(0,"h3"),m.Hc(1),m.Sb()),2&e){var r=m.ec().$implicit;m.Ab(1),m.Ic(r.value.sectionItem.title)}}function s(e,t){if(1&e&&(m.Tb(0,"span",12),m.Hc(1),m.Sb()),2&e){var r=m.ec(2).$implicit,o=m.ec(2).$implicit,n=m.ec(2);m.Ab(1),m.Ic(n.getValidationErrorFor(o.value.sectionItem.key,r.value.formItem))}}function f(e,t){if(1&e){var r=m.Ub();m.Tb(0,"div"),m.Tb(1,"app-dynamic-form-item",10),m.ac("itemAddedClicked",function(e){m.xc(r);var t=m.ec(3).$implicit;return m.ec(2).addNewItemToFormArrayWithId(t.key,e)})("itemRemovedClicked",function(e){m.xc(r);var t=m.ec(3).$implicit;return m.ec(2).removeItemAtIndexFromFormArrayWithId(t.key,e)}),m.Sb(),m.Fc(2,s,2,1,"span",11),m.Sb()}if(2&e){var o=m.ec().$implicit,n=m.ec(2).$implicit;m.ec();var i=m.wc(1),c=m.ec();m.Db(o.value.formItem.className),m.Ab(1),m.mc("control",o.value)("submitted",i.submitted)("sectionId",n.value.sectionItem.key),m.Ab(1),m.mc("ngIf",c.getValidationErrorFor(n.value.sectionItem.key,o.value.formItem))}}function v(e,t){if(1&e&&(m.Rb(0),m.Fc(1,f,3,6,"div",9),m.Qb()),2&e){var r=t.$implicit,o=m.ec(2).$implicit,n=m.ec(2);m.Ab(1),m.mc("ngIf",n.shouldRenderControl(o.key,r.value.formItem))}}function y(e,t){if(1&e&&(m.Tb(0,"div"),m.Fc(1,v,2,1,"ng-container",8),m.fc(2,"keyvalue"),m.Sb()),2&e){var r=m.ec().$implicit,o=m.ec(2);m.Db(r.value.sectionItem.className),m.Ab(1),m.mc("ngForOf",m.hc(2,3,r.value.controls,o.orderForm))}}function p(e,t){if(1&e&&(m.Tb(0,"span",12),m.Hc(1),m.Sb()),2&e){var r=m.ec(2).$implicit,o=m.ec().index,n=m.ec(2).$implicit,i=m.ec(2);m.Ab(1),m.Ic(i.getValidationErrorFor(n.value.sectionItem.key,r.value.formItem,o))}}function I(e,t){if(1&e){var r=m.Ub();m.Tb(0,"div",17),m.Tb(1,"app-dynamic-form-item",18),m.ac("itemAddedClicked",function(e){m.xc(r);var t=m.ec(2).index,o=m.ec(2).$implicit;return m.ec(2).addNewItemToFormArrayWithId(o.key,e,t)})("itemRemovedClicked",function(e){m.xc(r);var t=m.ec(2).index,o=m.ec(2).$implicit;return m.ec(2).removeItemAtIndexFromFormArrayWithId(o.key,e,t)}),m.Sb(),m.Fc(2,p,2,1,"span",11),m.Sb()}if(2&e){var o=m.ec().$implicit,n=m.ec().index,i=m.ec(2).$implicit;m.ec();var c=m.wc(1),a=m.ec();m.Db(o.value.formItem.className),m.Ab(1),m.mc("control",o.value)("sectionId",i.value.sectionItem.key+o.key+n)("submitted",c.submitted),m.Ab(1),m.mc("ngIf",a.getValidationErrorFor(i.value.sectionItem.key,o.value.formItem,n))}}function b(e,t){if(1&e&&(m.Rb(0),m.Fc(1,I,3,6,"div",16),m.Qb()),2&e){var r=t.$implicit,o=m.ec().index,n=m.ec(2).$implicit,i=m.ec(2);m.Ab(1),m.mc("ngIf",i.shouldRenderControl(n.value.sectionItem.key,r.value.formItem,o))}}function F(e,t){if(1&e){var r=m.Ub();m.Tb(0,"button",19),m.ac("click",function(){m.xc(r);var e=m.ec().index,t=m.ec(2).$implicit;return m.ec(2).removeItemAtIndexFromFormArrayWithId(t.key,null,e)}),m.Hc(1),m.Sb()}if(2&e){var o=m.ec().index,n=m.ec(2).$implicit;m.mc("id",n.value.sectionItem.key+o+"-remove"),m.Ab(1),m.Jc(" - Remove ",n.value.sectionItem.title," ")}}function g(e,t){if(1&e&&(m.Tb(0,"div",4),m.Fc(1,b,2,1,"ng-container",8),m.fc(2,"keyvalue"),m.Fc(3,F,2,2,"button",15),m.Sb()),2&e){var r=t.$implicit,o=m.ec(2).$implicit,n=m.ec(2);m.Db(o.value.sectionItem.className),m.Ab(1),m.mc("ngForOf",m.hc(2,4,r.controls,n.orderForm)),m.Ab(2),m.mc("ngIf",n.getFormArrayControls(o.value).length>1)}}function h(e,t){if(1&e){var r=m.Ub();m.Fc(0,g,4,7,"div",13),m.Tb(1,"button",14),m.ac("click",function(){m.xc(r);var e=m.ec().$implicit;return m.ec(2).addNewItemToFormArrayWithId(e.value.sectionItem.key)}),m.Hc(2),m.Sb()}if(2&e){var o=m.ec().$implicit,n=m.ec(2);m.mc("ngForOf",n.getFormArrayControls(o.value)),m.Ab(1),m.mc("id",o.value.sectionItem.key+"-add"),m.Ab(1),m.Jc(" + Add new ",o.value.sectionItem.title," ")}}function A(e,t){if(1&e&&(m.Tb(0,"div",4),m.Fc(1,d,2,1,"h3",5),m.Fc(2,y,3,6,"div",6),m.Fc(3,h,3,3,"ng-template",null,7,m.Gc),m.Sb()),2&e){var r=t.$implicit,o=m.wc(4);m.Ab(1),m.mc("ngIf",r.value.sectionItem.title),m.Ab(1),m.mc("ngIf",!r.value.sectionItem.multi)("ngIfElse",o)}}function x(e,t){if(1&e&&(m.Tb(0,"form",1,2),m.Fc(2,A,5,3,"div",3),m.fc(3,"keyvalue"),m.Sb()),2&e){var r=m.ec();m.mc("formGroup",r.extendedFormGroup),m.Ab(2),m.mc("ngForOf",m.hc(3,2,r.extendedFormGroup.controls,r.orderForm))}}var k=function(){function e(e){var t=this;this.formService=e,this.orderForm=function(e,t){return e.value.sectionItem&&t.value.sectionItem?e.value.sectionItem.order-t.value.sectionItem.order:e.value.formItem&&t.value.formItem?e.value.formItem.order-t.value.formItem.order:0},this.getValidationErrorFor=function(e,r,o){var n,i;return!t.validationErrors||t.validationErrors&&!t.validationErrors.length?null:((i=t.validationErrors.filter(o?function(t){return t.sectionId===e&&t.sectionIndex===o}:function(t){return t.sectionId===e}))&&i.length&&i.forEach(function(e){e.key===r.key&&(n=e.errorMessage)}),n)}}return e.prototype.shouldRenderControl=function(e,t,r){var n,i,c,a;if(t.rulerKey){var m=void 0;if(r>-1){var l=this.extendedFormGroup.get(e).at(r).get(t.rulerKey);l&&(m=l)}else m=this.extendedFormGroup.get(e).get(t.rulerKey);var u=m.value,d=t.condition;if(void 0===u||void 0===d)return console.warn("Something went wrong in shouldRenderControl: Ruler value or condition could not be found."),!1;if("string"==typeof u&&u===d)return this.shouldRenderControl(e,m.formItem,r);if(u&&d&&"object"==typeof d&&Array.isArray(d))try{for(var s=Object(o.f)(d),f=s.next();!f.done;f=s.next()){var v=f.value;if(v)if("object"==typeof u&&Array.isArray(u))try{for(var y=(c=void 0,Object(o.f)(u)),p=y.next();!p.done;p=y.next()){var I=p.value;if(I&&I.value===v.value)return this.shouldRenderControl(e,m.formItem,r)}}catch(b){c={error:b}}finally{try{p&&!p.done&&(a=y.return)&&a.call(y)}finally{if(c)throw c.error}}else if("object"==typeof u&&!Array.isArray(u)&&u&&u.value===v.value)return this.shouldRenderControl(e,m.formItem,r)}}catch(F){n={error:F}}finally{try{f&&!f.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}else{if(u&&"object"==typeof u&&!Array.isArray(u)&&u.value===d.value)return this.shouldRenderControl(e,m.formItem,r);if(u&&"boolean"==typeof u&&u===d)return this.shouldRenderControl(e,m.formItem,r)}return!1}return!0},e.prototype.addNewItemToFormArrayWithId=function(e,t,r){if(t)r>-1?(o=this.extendedFormGroup.get(e).at(r)).get(t).push(new n.d("")):this.extendedFormGroup.get(e).get(t).push(new n.d(""));else{var o=this.extendedFormGroup.get(e),c=this.formService.dynamicFormItemsToControls(o.sectionItem.items),a=new i.a(c,o.sectionItem);o.push(a)}},e.prototype.removeItemAtIndexFromFormArrayWithId=function(e,t,r){t&&t.id?r>-1?this.extendedFormGroup.get(e).at(r).get(t.id).removeAt(t.index):this.extendedFormGroup.get(e).get(t.id).removeAt(t.index):r>-1?this.extendedFormGroup.get(e).removeAt(r):console.warn("Error at removeItemAtIndexFromFormArrayWithId: Tried to remove section but no section index was provided")},e.prototype.getFormArrayControls=function(e){return e instanceof c.a?e.controls:(console.warn("Error in getFormArrayControls: control is not an instance of ExtendedFormGroupArray"),[])},e.\u0275fac=function(t){return new(t||e)(m.Nb(a.a))},e.\u0275cmp=m.Hb({type:e,selectors:[["app-dynamic-form"]],inputs:{extendedFormGroup:"extendedFormGroup",validationErrors:"validationErrors"},features:[m.zb([a.a])],decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["ngForm","ngForm"],["class","dynamic-form-section-item",4,"ngFor","ngForOf"],[1,"dynamic-form-section-item"],[4,"ngIf"],[3,"class",4,"ngIf","ngIfElse"],["multi",""],[4,"ngFor","ngForOf"],[3,"class",4,"ngIf"],[3,"control","submitted","sectionId","itemAddedClicked","itemRemovedClicked"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"],["class","dynamic-form-section-item",3,"class",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-secondary",3,"id","click"],["class","btn btn-sm btn-outline-danger","type","button",3,"id","click",4,"ngIf"],["class","form-group",3,"class",4,"ngIf"],[1,"form-group"],[3,"control","sectionId","submitted","itemAddedClicked","itemRemovedClicked"],["type","button",1,"btn","btn-sm","btn-outline-danger",3,"id","click"]],template:function(e,t){1&e&&m.Fc(0,x,4,5,"form",0),2&e&&m.mc("ngIf",t.extendedFormGroup)},directives:[l.o,n.x,n.m,n.g,l.n,u.a],pipes:[l.i],styles:[".dynamic-form-section-item {\n                margin-bottom: 1.5rem;\n            }"]}),e}()},Ci8B:function(e,t,r){"use strict";r.d(t,"a",function(){return d});var o=r("mrSG"),n=r("s7LF"),i=r("2Z8T"),c=r("bF3y"),a=function(e){function t(t,r,o){var i=e.call(this,r,t.required?n.v.required:null,o)||this;return i.options=[],i.formItem=t,i.options=t.options?t.options:null,i}return Object(o.c)(t,e),t}(n.d),m=r("efzA"),l=r("MpqC"),u=r("8Y7J"),d=function(){function e(){}return e.prototype.dynamicFormSectionsToFormGroup=function(e){var t=this,r={};return e.sort(function(e,t){return e.order-t.order}).forEach(function(e){if(e.multi){var o=t.dynamicFormItemsToControls(e.items),n=new c.a(o,e);r[e.key]=new l.a([n],e)}else o=t.dynamicFormItemsToControls(e.items),r[e.key]=new c.a(o,e)}),new c.a(r)},e.prototype.dynamicFormItemsToControls=function(e){var t={};return e.sort(function(e,t){return e.order-t.order}).forEach(function(e){if(e.controlType===i.a.Text&&e.multi){var r=e.value?e.value.map(function(e){return new n.d(e)}):[new n.d("")];t[e.key]=new m.a(e,r)}else t[e.key]=new a(e,e.value)}),t},e.prototype.dynamicFormItemsToFormGroup=function(e){var t=this.dynamicFormItemsToControls(e);return new c.a(t)},e.prototype.formToDynamicFormResponseItems=function(e,t){var r,n,i=[],c=function(r){var n,c,a=t.get(r);if(a)if(a instanceof l.a)a.controls.map(function(t,n){var c,a;try{for(var m=(c=void 0,Object(o.f)(Object.keys(e[r][n]))),l=m.next();!l.done;l=m.next()){var u=l.value,d=t.get(u)||null;d&&i.push({key:u,formItem:d.formItem,value:d.value,sectionId:r,sectionIndex:n})}}catch(s){c={error:s}}finally{try{l&&!l.done&&(a=m.return)&&a.call(m)}finally{if(c)throw c.error}}});else try{for(var m=(n=void 0,Object(o.f)(Object.keys(e[r]))),u=m.next();!u.done;u=m.next()){var d=u.value,s=a.get(d)||null;s&&i.push({key:d,formItem:s.formItem,value:s.value,sectionId:r,sectionIndex:0})}}catch(f){n={error:f}}finally{try{u&&!u.done&&(c=m.return)&&c.call(m)}finally{if(n)throw n.error}}};try{for(var a=Object(o.f)(Object.keys(e)),m=a.next();!m.done;m=a.next())c(m.value)}catch(u){r={error:u}}finally{try{m&&!m.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},e.\u0275prov=u.Jb({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}()},MpqC:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var o=r("mrSG"),n=function(e){function t(t,r){var o=e.call(this,t)||this;return o.sectionItem=r,o}return Object(o.c)(t,e),t}(r("s7LF").c)},bF3y:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var o=r("mrSG"),n=function(e){function t(t,r,o,n){var i=e.call(this,t,o,n)||this;return i.sectionItem=r,i}return Object(o.c)(t,e),t.prototype.get=function(t){return e.prototype.get.call(this,t)},t}(r("s7LF").f)}}]);