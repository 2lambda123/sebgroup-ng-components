<ng-container *ngIf="monthPicker; else datePicker">
    <ng-container *ngIf="!forceCustom && supportsInputOfType('month'); else dateFallback">
        <input type="month" class="form-control seb-date-picker-native" [class.is-invalid]="!value" [(ngModel)]="inputRawValue" />
    </ng-container>
</ng-container>

<ng-template #datePicker>
    <ng-container *ngIf="!forceCustom && supportsInputOfType('date'); else dateFallback">
        <input type="date" class="form-control seb-date-picker-native" [class.is-invalid]="!value" [(ngModel)]="inputRawValue" />
    </ng-container>
</ng-template>

<ng-template #dateFallback>
    <div class="input-group">
        <input
            [style.display]="monthPicker ? 'none' : 'inherit'"
            [class.is-invalid]="!inputRawValue"
            class="form-control"
            type="number"
            min="1"
            max="31"
            placeholder="Day"
            (ngModelChange)="value = toDate(updateUIDate(toUIDate(value), 'day', $event))"
            [ngModel]="toUIDate(value).day || null"
        />
        <select
            #s
            [class.is-invalid]="!value"
            [class.rounded-left]="monthPicker"
            (change)="value = toDate(updateUIDate(toUIDate(value), 'month', s.selectedIndex, !monthPicker))"
            class="custom-select"
        >
            <option [disabled]="i === 0" [selected]="toUIDate(value).month === i" *ngFor="let month of monthNames; let i = index">{{
                month
            }}</option>
        </select>
        <input
            [class.is-invalid]="!value"
            class="form-control"
            type="number"
            min="1"
            placeholder="Year"
            (ngModelChange)="value = toDate(updateUIDate(toUIDate(value), 'year', $event, !monthPicker))"
            [ngModel]="toUIDate(value).year || null"
        />
    </div>
</ng-template>
