<ng-container *ngIf="monthPicker; else datePicker">
    <ng-container *ngIf="!forceCustom && supportsInputOfType('month'); else dateFallback">
        <input
            type="month"
            class="form-control seb-date-picker-native"
            [class.is-invalid]="!isValidDate(value)"
            [(ngModel)]="inputRawValue"
        />
    </ng-container>
</ng-container>

<ng-template #datePicker>
    <ng-container *ngIf="!forceCustom && supportsInputOfType('date'); else dateFallback">
        <input
            type="date"
            class="form-control seb-date-picker-native"
            [class.is-invalid]="!isValidDate(value)"
            [(ngModel)]="inputRawValue"
        />
    </ng-container>
</ng-template>

<!-- {{ customPickerValue | json }} -->

<ng-template #dateFallback>
    <div class="input-group">
        <input
            #dayInput
            [style.display]="monthPicker ? 'none' : 'inherit'"
            [class.is-invalid]="dayInput.valueAsNumber !== customPickerDay || !isValidDate(value)"
            class="form-control"
            type="number"
            min="1"
            max="31"
            placeholder="Day"
            [(ngModel)]="customPickerDay"
        />
        <select
            #monthInput
            [class.is-invalid]="monthInput.selectedIndex !== customPickerMonth || !isValidDate(value)"
            [class.rounded-left]="monthPicker"
            [(ngModel)]="customPickerMonth"
            class="custom-select"
        >
            <option
                [disabled]="i === 0"
                [value]="i"
                [selected]="i === monthInput.selectedIndex"
                *ngFor="let month of monthNames; let i = index"
                >{{ month }}
            </option>
        </select>
        <input
            #yearInput
            [class.is-invalid]="yearInput.valueAsNumber !== customPickerYear || !isValidDate(value)"
            class="form-control"
            type="number"
            min="1"
            placeholder="Year"
            [(ngModel)]="customPickerYear"
        />
    </div>
</ng-template>
